#!/usr/bin/python3
from flask import Flask
from flask_mysqldb import MySQL
import json

app = Flask(__name__)
app.config['MYSQL_USER'] = 'iot'
app.config['MYSQL_PASSWORD'] = 'jorenjamar'
app.config['MYSQL_DB'] = 'IOT'

mysql = MySQL(app)

@app.route('/photoInfo')
def index():
	cur = mysql.connection.cursor()
	cur.execute('''SELECT Foto.naam, Foto.uur, Les.starttijd, Les.eindtijd
			FROM Foto
			INNER JOIN Les O
	N Foto.lesid=Les.id''')
	rv = cur.fetchall()

	tijdelijk = []

	for row in rv:
		tijdelijk.append(list(row))

	for row in tijdelijk:
		row[1] = str(row[1])
		row[2] = str(row[2])
		row[3] = str(row[3])

	return json.dumps(tijdelijk)
	#return str(rv)

@app.route('/photo')
def photo():
	return 'Hey daar, dit is de coole DJ Jaman hier. Ik zit naast de lelijke Kevin Davis.'


if __name__ == '__main__':
	app.run(host='0.0.0.0')
